## 프로세스란?
> 실행중인 프로그램

프로세스는 일반적으로 CPU에 의해 처리되는 사용자 프로그램, 시스템 프로그램 즉 실행중인 프로그램을 의미하며, 작업(Job) 태스크(Task)라고도 한다.

### Program vs Process
프로그램 그 자체로는 아무 일도 할 수 없다. `프로그램`은 그저 하드디스크에 저장되어 있는 하나의 파일, 즉 **수동적**인 존재일 뿐이다.<br>
프로그램이 사용자에게 유용한 기능을 제공하기 위해서는 메모리에 로드되어서 프로그램 카운터(PC) 및 관련 자원의 집합을 가진 능동적인 존재로서 동작해야 한다.
<br><br>
그래서 `프로세스`는 **실행중인 프로그램**이라고 불린다.

### 프로세스 vs 프로세서
`프로세서`는 하드웨어적인 측면에서 컴퓨터 내에 프로그램을 수행하는 하드웨어 유닛으로 중앙처리장치(CPU)를 뜻한다.

`프로세스`는 프로세서가 실행할 명령어와 데이터 목록을 메모리에 읽어들인 것을 말한다.

### 프로그램이 하나의 프로세스가 되는 과정
사용자가 `프로그램`을 시작해달라는 요청(아이콘 더블클릭 등)을 보내면 OS는 `프로세서(하드디스크)`에서 해당 프로그램을 메인 메모리로 로드하면서 필요한 `자원을 할당`한다.

<img src="https://github.com/yuwltn/yuwltn/blob/main/process.jpg" width = "500" height="300">

### 메모리 상에 존재하는 프로세스 구조
* Text - 실행 가능한 코드 집합
* Data - 전역 변수들
* Heap - 런타임에 동적으로 메모리에 할당되는 데이터, 예들 들어 실행 중에 생성되는 인스턴스 들에 대한 정보
* Stack - 함수가 실행될 때 일시적으로 생기는 데이터들, 예를 들어 지역 변수, 파라미터, 복귀 주소 등

Text와 Data 영역의 크기는 고정되어 있지만 Heap과 Stack 영역의 크기는 런타임에 수시로 변경된다.

## 프로세스의 상태(프로세스 전이도)
* 생성(new) : 갓 생성된 상태, OS의 커널에 PCB 등이 생성된다.
* 준비(ready) : CPU의 서비스를 받기 위해 Ready Queue에서 대기하고 있는 상태
* 실행(ruuning) : CPU에 의해 실행되는 있는 상태
* 대기(waiting or blocked) : I/O나 다른 event를 기다리며 멈춰있는 상태
* 종료(terminated) : 실행을 완료하는 등의 이유로 종류된 상태

<img src="https://github.com/yuwltn/yuwltn/blob/main/process2.jpg" width="600" height="300">

## PCB(Process Control Block)란?
각 프로세스는 운영체제에서 `프로세스 제어 블록(PCB)`에 의해 표현된다.
<br><br>
각 프로세스는 **하나의 PCB**를 가지며 PCB에는 해당 **프로세스에 대한 모든 정보**, 이를테면 프로세스 상태(running, waiting, ready...), Program Counter, registers, MMU info, CPU 사용시간, Process id 등을 저장하고 있다.
<br>
프로세스는 OS의 프로세스 관리 부서에서 관리하는데 이 곳에 PCB가 저장되어 있다.

<img src="https://github.com/yuwltn/yuwltn/blob/main/pcb.jpg" width="450" height="310" >

## PCB 구성
* 포인터 : 준비 상태나 대기 상태는 큐로 운영되는데, PCB를 연결하여 준비 상태나 대기 상태의 큐를 구현할 때 포인터를 사용한다.
* 프로세스 상태(생성, 준비, 실행, 대기, 종료)
* PID(Process ID) : 프로세스를 구별하기 위한 식별자
* 프로그램 카운터(Program Counter) : 다음에 실행될 명령어의 위치를 가리키는 값
* 프로세스 우선순위 : 프로세스에 CPU를 할당할 때 중요도에 따른 우선순위를 고려하기 위한 정보
* 각종 레지스터 정보 : 프로세스가 다시 CPU를 할당받아올 때 이전 작업을 이어서 하기 위한 정보
* 메모리 관리 정보 : 프로세스가 메모리 어디에 올라와있는지에 대한 정보
* 할당된 자원 정보 : 프로세스를 실행하기 위해 사용되는 입출력 자원이나 오픈 파일 등에 대한 정보
* 계정 정보 : 계정번호, CPU 할당시간, CPU 사용시간 등
* 부모 프로세스 구분자와 자식 프로세스 구분자 : ParentPID(PPID), ChildPID(CPID)

## 문맥 교환(Context Switching)
문맥 교환은 CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 작업을 말한다.
이때 두 프로세스 제어 블록의 내용이 변경된다. 실행 상태에서 나가는 프로세스 제어 블록에는 지금까지의 작업 내용을 저장하고, 반대로 실행 상태로 들어오는 프로세스는 제어 블록의 내용으로 CPU가 다시 세팅된다. 이와 같이 두 프로세스의 프로세스 제어 블록을 교환하는 작업이 문맥 교환이다.


## References
* https://wisdom-and-record.tistory.com/85?category=932460
* https://jobdong7757.tistory.com/21
* https://kjhoon0330.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C-2-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A0%9C%EC%96%B4-%EB%B8%94%EB%A1%9D%EA%B3%BC-%EB%AC%B8%EB%A7%A5-%EA%B5%90%ED%99%98
